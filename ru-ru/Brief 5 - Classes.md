# Классы

**Класс** - это определение формы объекта. Свойства объекта определяют его состояние, методы - его поведение. Классы и интерфейсы основные строительные блоки объектно-ориентированной парадигмы программирования. В JavaScript конструкция класс представлена начиная со спецификации ECMAScript 6. TypeScript позволяет использовать классы и компилировать их в более ранние версии JavaScript, поддерживаемые любыми браузерами и платформами. Более того, в TypeScript классы поддерживают практически всю функциональность классического ООП, за небольшими исключениями, налагаемыми особенностями самого JavaScript.

Типичный класс

```ts
class SomeClass {
  a: number;  // Поле (переменная) класса

  constructor(arg: number) { // Конструктор (инициализатор) класса
    this.a = arg;  // 'this' - ссылка на экземпляр (объект) класса
  }

  print() { // Метод (функция) класса
    console.log(this.a);
  }
}

const someObject = new SomeClass(10);  // Создаем экземпляр (объект) класса
someObject.print();  // 10
```

## Поля класса

Свойства - это способ инкапсуляции данных внутри объекта. Объявляя поля класса, мы описываем общедоступные, записываемые свойства для его экземпляров

```ts
class Coord {
  x: number;
  y: number;
  z: number;
}

const pos = new Coord();
pos.x = 0; pos.y = 0; pos.z = 0;
```

если попытаться скомпилировать этот код, то получим ошибку типа: **error TS2564: Свойства 'x/y/z' не инициализированы и не назначены в конструкторе**. Компилятор всегда требует, чтобы все свойства объекта были установленны в допустимое значение до его использования. То есть проведена начальная инициализация. Чтобы поправить ситуацию, необходимо непосредственно установить значения полей класса и тогда компилятор автоматически инициализирует ими свойства, при создании экземпляров

```ts
class Coord {
  x = 0;  // в данном случае, тип поля компилятор выведет автоматически
  // ...
}
```

TypeScript не анализирует методы, вызываемые в конструкторе, на предмет инициализации свойств. Это связано с тем, что сам конструктор может быть переопределен в производном классе. Поэтому иногда требуется обойти проверку инициализации свойств объекта. Для этого можно явно указать, что свойство может принимать тип `undefined`, используя объединение типов

```ts
class Coord {
  x: number | undefined;
  // ...
}
```

либо, использовать утверждение присваивания, как в случае с переменной

```ts
class Coord {
  x!: number;
  // ...
}
```

Чтобы защитить свойство от изменения, применяют модификатор `readonly` к полю класса. В этом случае инициализировать свойство можно только непосредственной установкой значения поля или в конструкторе класса

```ts
class SomeClass {
  readonly a: number = 0;  // OK

  constructor(a: number) {
    this.a = a;  // инициализация свойства в конструкторе
  }

  setToZero() {
    this.a = 0; // Ошибка! Свойство доступно только для чтения
  }
}

// Создаем экземпляр и устанавливаем значение свойства в конструкторе
const someObject = new SomeClass(10);
console.log(someObject.a);  // 10

someObject.a = 5;  // Ошибка! Свойство доступно только для чтения
```
